{
  "hash": "ba233c532f72c69718892acb0754da2d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Semana 29\"\nsubtitle: \"Figura semana 29\"\nauthor: Víctor Gauto\ndate: \"2023-07-23\"\neditor_options:\n  chunk_output_type: console\ncategories: [geom_col, geom_text]\nimage: https://raw.githubusercontent.com/vhgauto/tidytuesday/refs/heads/main/2023/semana_29/viz.png\nexecute:\n  eval: false\n  echo: true\ncode-fold: true\n---\n\n\n\n\nLos detectores de IA tienen serias limitaciones en detectar texto escrito en inglés por quienes no son nativos del idioma.\n\n# Script\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# paquetes ----------------------------------------------------------------\n\nlibrary(tidyverse)\nlibrary(ggwaffle)\nlibrary(glue)\nlibrary(ggtext)\nlibrary(showtext)\n\n# fuentes -----------------------------------------------------------------\n\n# colores, Renoir\nc1 <- \"#17164F\"\nc2 <- \"#9D9CD5\"\nc3 <- \"#6C5D9E\"\nc4 <- \"#E69B00\"\nc5 <- \"#BF3728\"\nc6 <- \"#F6B3B0\"\n\n# texto gral\nfont_add_google(name = \"Ubuntu\", family = \"ubuntu\")\n# título y porcentajes\nfont_add_google(name = \"Victor Mono\", family = \"victor\", db_cache = FALSE)\n\n# íconos\nfont_add(\"fa-brands\", \"icon/Font Awesome 6 Brands-Regular-400.otf\")\nfont_add(\"fa-solids\", \"icon/Font Awesome 6 Free-Solid-900.otf\")\n\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\n# caption\nfuente <- glue(\"Datos: <span style='color:{c3};'><span style='font-family:mono;'>{{<b>tidytuesdayR</b>}}</span> semana 29, **GPT Detectors Are Biased Against Non-Native English Writers**. Weixin Liang, Mert Yuksekgonul, Yining Mao, Eric Wu, James Zou. arXiv: **2304.02819**</span>\")\nautor <- glue(\"Autor: <span style='color:{c3};'>**Víctor Gauto**</span>\")\nicon_twitter <- glue(\"<span style='font-family:fa-brands;'>&#xf099;</span>\")\nicon_github <- glue(\"<span style='font-family:fa-brands;'>&#xf09b;</span>\")\nusuario <- glue(\"<span style='color:{c3};'>**vhgauto**</span>\")\nsep <- glue(\"**|**\")\n\nmi_caption <- glue(\"{fuente}<br>{autor} {sep} {icon_github} {icon_twitter} {usuario}\")\n\n# datos -------------------------------------------------------------------\n\nbrowseURL(\"https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-07-18/readme.md\")\n\ndetectors <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-07-18/detectors.csv')\n\n# aciertos/errores en la detección de texto HUMANO\ndetectors |> \n  filter(kind == \"Human\") |> \n  summarise(acierto = mean(kind == .pred_class)) |> \n  mutate(error = 1 - acierto)\n\n# aciertos/errores en la detección de texto IA\ndetectors |> \n  filter(kind == \"AI\") |> \n  summarise(acierto = mean(kind == .pred_class)) |> \n  mutate(error = 1 - acierto)\n\n# aciertos/errores en la detección de texto HUMANO, entre nativos/NO nativos\ndetectors |> \n  filter(kind == \"Human\") |> \n  group_by(native) |> \n  summarise(acierto = mean(kind == .pred_class)) |> \n  mutate(error = 1 - acierto)\n\n# porcentaje de aciertos entre texto generado por nativos del inglés\nporc_nativo <- detectors |> \n  filter(kind == \"Human\" & native == \"Yes\") |> \n  summarise(acierto = mean(kind == .pred_class)) |> \n  pull(acierto) |> \n  gt::vec_fmt_percent(decimals = 0, sep_mark = \".\", dec_mark = \",\")\n\n# porcentaje de aciertos entre texto generado por NO nativos del inglés\nporc_no_nativo <- detectors |> \n  filter(kind == \"Human\" & native == \"No\") |> \n  summarise(acierto = mean(kind == .pred_class)) |> \n  pull(acierto) |> \n  gt::vec_fmt_percent(decimals = 0, sep_mark = \".\", dec_mark = \",\")\n\n# me interesa el porcentaje de aciertos, entre nativos/NO nativos, para los\n# siete detectores\nd <- detectors |> \n  filter(!is.na(native)) |> \n  group_by(detector, native) |> \n  reframe(prop = mean(kind == .pred_class)) |> \n  mutate(detector = fct_reorder(detector, prop, max))\n\n# figura ------------------------------------------------------------------\n\n# título y subtítulo\ntit <- glue(\"Si no hablás inglés nativo,<br>las IA dudan de tu humanidad\")\n\nsubtit <- glue(\n  \"Se solicitó a <span style='color:{c6}'>**siete detectores de IA**</span> que\n  identifiquen si texto, en inglés escrito por humanos, **fue o no generado<br>\n  por una IA**. Para los textos creados por \n  <span style='color:{c5};'>**nativos del ingles**</span>, en promedio, \n  hubo un **{porc_nativo}** de aciertos. Sin embargo, <br>\n  para los <span style='color:{c4};'>**no nativos del inglés**</span>, \n  disminuye al **{porc_no_nativo}**.\"\n)\n\n# figura\ng <- ggplot(data = d, aes(x = prop, y = detector, fill = native)) +\n  # columnas\n  geom_col(\n    position = position_dodge(), show.legend = FALSE, width = .5, color = c2) +\n  # porcentajes\n  geom_text(\n    aes(label = gt::vec_fmt_percent(\n      prop, decimals = 0, dec_mark = \",\", sep_mark = \".\")),\n    position = position_dodge(width = .5), color = c6, size = 5,\n    hjust = -.25, family = \"victor\") +\n  scale_x_continuous(\n    limits = c(0, 1), expand = c(0, 0), breaks = c(0, .5, 1),\n    labels = scales::label_percent()) +\n  scale_fill_manual(values = c(c4, c5)) +\n  labs(\n    x = NULL, y = NULL, title = tit, subtitle = subtit, caption = mi_caption) +\n  coord_cartesian(clip = \"off\") +\n  theme(\n    aspect.ratio = 1,\n    plot.background = element_rect(fill = c1, color = c3, linewidth = 3),\n    plot.margin = margin(8, 40, 8, 13),\n    plot.title.position = \"plot\",\n    plot.title = element_markdown(\n      color = c2, size = 45, family = \"victor\", hjust = .5),\n    plot.subtitle = element_markdown(\n      color = c2, family = \"ubuntu\", size = 16, margin = margin(2, 2, 10, 2), \n      lineheight = 1.3),\n    plot.caption = element_markdown(color = c2),\n    panel.background = element_blank(),\n    panel.grid = element_blank(),\n    panel.grid.major.x = element_line(\n      linewidth = .2, linetype = \"8f\", color = c2),\n    axis.text.y = element_text(\n      hjust = 1, color = c6, family = \"ubuntu\", size = 15,face = \"bold\"),\n    axis.text.x = element_text(\n      color = c3, size = 15, family = \"victor\", hjust = 0),\n    axis.ticks = element_blank()\n  )\n\n# guardo\nggsave(\n  plot = g,\n  filename = \"2023/semana_29/viz.png\",\n  width = 30,\n  height = 32.5,\n  units = \"cm\"\n)\n\n# abro\nbrowseURL(\"2023/semana_29/viz.png\")\n```\n:::\n\n\n\n\n# Figura\n\n![](https://raw.githubusercontent.com/vhgauto/tidytuesday/refs/heads/main/2023/semana_29/viz.png)\n\n\n",
    "supporting": [
      "semana_29_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}