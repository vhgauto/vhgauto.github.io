{
  "hash": "330a12ab4c66ddc7441c2d4f27d3bd97",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Semana 39\"\nsubtitle: \"Figura semana 39\"\nauthor: Víctor Gauto\ndate: \"2024-09-30\"\neditor_options:\n  chunk_output_type: console\ncategories: [geom_point, argentina]\nimage: https://raw.githubusercontent.com/vhgauto/tidytuesday/refs/heads/main/2024/s39/viz.png\nexecute:\n  eval: false\n  echo: true\ncode-fold: true\n---\n\n\n\n\nParticipación Argentina en las Olimpiadas de Matemáticas Internacionales.\n\n# Script\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# paquetes ----------------------------------------------------------------\n\nlibrary(glue)\nlibrary(ggtext)\nlibrary(showtext)\nlibrary(tidyverse)\n\n# fuente ------------------------------------------------------------------\n\n# colores\nc1 <- \"black\"\nc2 <- \"grey30\"\nc3 <- \"grey60\"\nc4 <- \"white\"\nc5 <- \"#F6B40E\"\nc6 <- \"#75AEE0\"\nc7 <- \"#97C124\"\n\n# fuente: Ubuntu\nfont_add(\n  family = \"ubuntu\", \n  regular = \"fuente/Ubuntu-Regular.ttf\",\n  bold = \"fuente/Ubuntu-Bold.ttf\",\n  italic = \"fuente/Ubuntu-Italic.ttf\"\n)\n\n# monoespacio & íconos\nfont_add(\n  family = \"jet\", \n  regular = \"fuente/JetBrainsMonoNLNerdFontMono-Regular.ttf\"\n)\n\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\n# caption\nfuente <- glue(\n  \"Datos: <span style='color:{c5};'><span style='font-family:jet;'>\",\n  \"{{<b>tidytuesdayR</b>}}</span> semana {39}, \",\n  \"<b>International Mathematical Olympiad</b> (IMO).</span>\"\n)\nautor <- glue(\"<span style='color:{c5};'>**Víctor Gauto**</span>\")\nicon_twitter <- glue(\"<span style='font-family:jet;'>&#xf099;</span>\")\nicon_instagram <- glue(\"<span style='font-family:jet;'>&#xf16d;</span>\")\nicon_github <- glue(\"<span style='font-family:jet;'>&#xf09b;</span>\")\nicon_mastodon <- glue(\"<span style='font-family:jet;'>&#xf0ad1;</span>\")\nusuario <- glue(\"<span style='color:{c5};'>**vhgauto**</span>\")\nsep <- glue(\"**|**\")\n\nmi_caption <- glue(\n  \"{fuente}<br>{autor} {sep} {icon_github} {icon_twitter} {icon_instagram} \",\n  \"{icon_mastodon} {usuario}\"\n)\n\n# datos -------------------------------------------------------------------\n\ntuesdata <- tidytuesdayR::tt_load(2024, 39)\nindividual_results_df <- tuesdata$individual_results_df\n\n# me interesa la cantidad y tipo de premio de Argentina, por año\n\n# orden y etiquetas de los premios\norden_award <- c(\n  \"Honourable mention\", \"Bronze medal\", \"Silver medal\", \"Gold medal\"\n)\n\netq_award <- c(\"Menciónnde honor\", \"Bronce\", \"Plata\", \"Oro\")\n\n# obtengo los datos de Argentina y resumo por año\nd <- individual_results_df |> \n  filter(country == \"Argentina\") |> \n  count(year, award) |> \n  drop_na() |> \n  mutate(\n    award = factor(award, levels = orden_award, labels = etq_award)\n  ) |>\n  mutate(\n    n = factor(n)\n  )\n\n# figura ------------------------------------------------------------------\n\n# bandera y logo del IMO\nbandera <- \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Flag_of_Argentina.svg/640px-Flag_of_Argentina.svg.png\"\n\nimo <- \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/17/IMO_logo.svg/640px-IMO_logo.svg.png\"\n\n# función para hacer una separación entre la bandera y el logo\nf_espacio <- function(n) {\n  str_flatten(rep(\"_\", n))\n}\n\n# nombre para shape y size\netq <- \"Cantidadnde premios\"\n\n# subtítulo y título\nmi_subtitulo <- glue(\n  \"<img src={bandera} width=120 />\",\n  \"<span style='color:{c2}'>\",\n  \"{f_espacio(85)}</span>\",\n  \"<img src={imo} width=120 />\"\n)\n\nmi_titulo <- glue(\n  \"Participación de <b style='color:{c5}'>Argentina</b> \",\n  \"en las <b style='color:{c6};'>Olimpiadas Internacionales de Matemática</b>.\"\n)\n\n# figura\ng <- ggplot(d, aes(year, award, size = n, fill = n)) +\n  geom_point(shape = 21, color = c1, stroke = 1) +\n  scale_x_continuous(\n    breaks = scales::breaks_width(2),\n    labels = (x) glue(\"'{str_sub(x, 3, 4)}\"),\n    expand = c(0, 1)\n  ) +\n  scale_y_discrete(expand = c(0, .2)) +\n  scale_fill_manual(\n    values = MoMAColors::moma.colors(palette_name = \"Liu\", n = 5)\n  ) +\n  scale_size_manual(\n    values = seq(2, 11, length.out = 5)\n  ) +\n  labs(\n    x = NULL, y = NULL, fill = etq, size = etq, title = mi_titulo,\n    subtitle = mi_subtitulo, caption = mi_caption) +\n  ggthemes::theme_pander() +\n  theme(\n    aspect.ratio = .5,\n    plot.background = element_rect(fill = c2, color = c7, linewidth = 3),\n    plot.margin = margin(t = 40, b = 10, l = 10, r = 10),\n    plot.title = element_markdown(\n      size = 13, family = \"ubuntu\", face = \"plain\", hjust = .5, color = c4\n    ),\n    plot.subtitle = element_markdown(margin = margin(t = -50, b = 10)),\n    plot.caption = element_markdown(\n      color = c6, family = \"ubuntu\", size = 10, lineheight = unit(1.1, \"line\"),\n      margin = margin(t = 16.5)\n    ),\n    panel.grid = element_line(color = c3),\n    axis.text = element_text(color = c4),\n    axis.text.x = element_text(family = \"jet\", size = 10),\n    axis.text.y = element_text(family = \"ubuntu\", size = 16),\n    legend.position = \"bottom\",\n    legend.title = element_text(\n      family = \"ubuntu\", size = 12, face = \"plain\", hjust = 1, color = c4\n    ),\n    legend.background = element_blank(),\n    legend.text = element_text(\n      margin = margin(l = 2, r = 10), color = c4, family = \"jet\"\n    )\n  )\n\n# guardo\nggsave(\n  plot = g,\n  filename = \"2024/s39/viz.png\",\n  width = 30,\n  height = 21,\n  units = \"cm\")\n\n# abro\nbrowseURL(glue(\"{getwd()}/2024/s39/viz.png\"))\n```\n:::\n\n\n\n\n# Figura\n\n![](https://raw.githubusercontent.com/vhgauto/tidytuesday/refs/heads/main/2024/s39/viz.png)\n\n\n",
    "supporting": [
      "semana_39_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}