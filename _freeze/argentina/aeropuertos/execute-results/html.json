{
  "hash": "0b43ddd88704cd2833b5ad1dd5f3b3b9",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat:\n  html:\n    code-fold: show\n    code-summary: \"Ocultar código\"\n    code-line-numbers: false\n    code-annotations: false\n    code-link: true\n    code-tools:\n        source: true\n        toggle: true\n        caption: \"Código\"\n    code-overflow: scroll\n    page-layout: full\neditor_options:\n  chunk_output_type: console\ncategories: [\"geom_sf\"]\nexecute:\n  eval: false\n  echo: true\n  warning: false\ntitle: \"Aeropuertos\"\ndate: 2024-08-03\nauthor: Víctor Gauto\n---\n\n\n\n\nMapa de aeropuertos de Argentina.\n\n![Aeropuertos en actividad en Argentina.](aeropuertos.png)\n\n## Paquetes\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(terra)\nlibrary(tidyterra)\nlibrary(glue)\nlibrary(showtext)\nlibrary(ggtext)\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n## Estilos\n\nColores aleatorios a partir de una gama de rosados.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(2024)\npp <- PrettyCols::prettycols(palette = \"Pinks\", n = 24, type = \"continuous\") |>\n  sample()\n\nc1 <- \"black\"\nc2 <- \"white\"\nc3 <- \"#FCAADE\"\nc4 <- \"#860A4D\"\n```\n:::\n\n\n\n\nFuentes: Ubuntu, JetBrains Mono y fontawesome.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfont_add(\n  family = \"ubuntu\",\n  regular = \"././fuente/Ubuntu-Regular.ttf\",\n  bold = \"././fuente/Ubuntu-Bold.ttf\",\n  italic = \"././fuente/Ubuntu-Italic.ttf\"\n)\n\nfont_add(\n  family = \"jet\",\n  regular = \"././fuente/JetBrainsMonoNLNerdFontMono-Regular.ttf\"\n)\n\nfont_add(\n  family = \"fa\",\n  regular = \"././fuente/Font Awesome 6 Free-Solid-900.otf\"\n)\n\nshowtext_auto()\nshowtext_opts(dpi = 300)\n```\n:::\n\n\n\n\n## Epígrafe\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfuente <- glue(\n  \"<b>Datos:</b> <span style='color:{c1};'>IGN</span>\")\nautor <- glue(\"<span style='color:{c1};'>Víctor Gauto</span>\")\nicon_twitter <- glue(\"<span style='font-family:jet;'>&#xeb72;</span>\")\nicon_instagram <- glue(\"<span style='font-family:jet;'>&#xf16d;</span>\")\nicon_github <- glue(\"<span style='font-family:jet;'>&#xf09b;</span>\")\nicon_mastodon <- glue(\"<span style='font-family:jet;'>&#xf0ad1;</span>\")\nusuario <- glue(\"<span style='color:{c1};'>vhgauto</span>\")\nsep <- glue(\"**|**\")\n\nmi_caption <- glue(\n  \"{fuente} {sep} {autor} {sep} <b>{icon_github} {icon_twitter} \",\n  \"{icon_instagram} {icon_mastodon}</b> {usuario}\"\n)\n```\n:::\n\n\n\n\n## Datos\n\nVectores de las provincias con sus departamentos. Obtengo el vector de aeropuertos del [Instituto Geográfico Nacional](https://www.ign.gob.ar/NuestrasActividades/InformacionGeoespacial/CapasSIG), y conservo únicamente los que se encuentran en actividad.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npcias <- vect(\"argentina/vectores/pcias_continental.gpkg\") |>\n  project(\"EPSG:5346\")\n\ndptos_pcias <- vect(\"argentina/vectores/dptos_pcias_continental.gpkg\")\n\naer <- vect(\"argentina/vectores/extras/puntos_de_transporte_aereo_GB005.json\") |>\n  project(\"EPSG:5346\")\n\naer <- aer[aer$fun == 6]\n```\n:::\n\n\n\n\n## Figura\n\nÍconos de los aviones\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nicon1 <- glue(\"<span style='font-family:fa; color:{c2};'>&#xf5b0;</span> \")\nicon2 <- glue(\"<span style='font-family:fa; color:{c2};'>&#xf072;</span> \")\nicon3 <- glue(\"<span style='font-family:fa; color:{c2};'>&#xf5af;</span> \")\nicon <- glue(\"{icon1} {icon2} {icon3}\")\n```\n:::\n\n\n\n\nSubtítulo y posición.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx_sub <- ext(aer)$xmax\ny_sub <- ext(aer)$ymax\n\nmi_subtitle <- glue(\n  \"En <b style='color: {c1}'>Argentina</b> hay en\",\n  \"funcionamiento <b style='color:{c4}'>{nrow(aer)}</b>\",\n  \"aeropuertos.<br>\",\n  \"{icon}\",\n  .sep = \"<br>\"\n)\n```\n:::\n\n\n\n\nFigura.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ng <- ggplot() +\n  # departamentos\n  geom_sf(\n    data = dptos_pcias, aes(fill = provincia), color = c2, linewidth = .3,\n    linetype = \"22\"\n  ) +\n  # provincias\n  geom_sf(\n    data = pcias, fill = NA, color = c1, linewidth = .4\n  ) +\n  # aeropuertos\n  geom_sf(\n    data = aer, fill = c2, color = c1, size = 11, alpha = .8,\n    stroke = 1, shape = 21) +\n  # subtítulo\n  annotate(\n    geom = \"richtext\", x = x_sub*.84, y = y_sub*.66, label = mi_subtitle,\n    fill = NA, label.color = NA, size = 12, color = c1, hjust = 0,\n    family = \"ubuntu\"\n  ) +\n  scale_fill_manual(values = pp) +\n  labs(caption = mi_caption) +\n  theme_void() +\n  theme(\n    plot.margin = margin(r = 8, l = 8, t = 2),\n    plot.background = element_rect(\n      fill = c3, color = c4, linewidth = 3),\n    plot.caption = element_markdown(\n      family = \"jet\", color = c4, hjust = .5, size = 20,\n      margin = margin(b = 10)),\n    legend.position = \"none\"\n  )\n```\n:::\n\n\n\n\nGuardo.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\n  plot = g,\n  filename = \"argentina/aeropuertos.png\",\n  width = 30,\n  height = 65,\n  units = \"cm\"\n)\n```\n:::\n",
    "supporting": [
      "aeropuertos_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}